import{b as E,e as F,r as h,W as le,f as ne,h as g,o as L,c as te,L as oe,M as de,k as e,i as l,j as n,x as V,t as D,$ as Q,I as W,n as re,s as ie,v as se,z as ue}from"./index-BP30Yz_m.js";import{C as pe}from"./index-DTWQQqpJ.js";import{l as be,u as me,a as ce,g as fe,d as _e}from"./brand-BhZJJOxQ.js";import{r as A}from"./verify-D2E6NcQX.js";function ge(){const{t}=E();return{pageData:F({columnData:[{label:t("brandInfo.brand_code"),prop:"brandCode",width:"150",fixed:"left"},{label:t("brandInfo.abbreviation"),prop:"brandName",width:"150",fixed:"left"},{label:t("brandInfo.full_name"),prop:"brandFullName",width:"150"},{label:t("brandInfo.english_name"),prop:"brandEnName",width:"150"},{label:t("brandInfo.packaging_requirements"),prop:"packageRequest",width:"150"},{label:t("brandInfo.shipping_requirements"),prop:"shippingMark",width:"150"},{label:t("brandInfo.remark"),prop:"remark",width:"150"},{label:t("brandInfo.del_flag"),prop:"disable",width:"150"},{label:t("brandInfo.create_nickname"),prop:"createNickName",width:"150"},{label:t("brandInfo.create_time"),prop:"createTime",width:"180"},{label:t("brandInfo.update_nickname"),prop:"updateNickName",width:"150"},{label:t("brandInfo.update_time"),prop:"updateTime",width:"180"},{label:t("operate"),prop:"operate",width:"150",fixed:"right"}]})}}function he(){const t=F({pageSize:10,pageNum:1,brandCode:null,brandName:null,brandFullName:null,brandEnName:null,disable:0}),a=F({list:[],total:0}),u=h(),v=()=>{t.pageNum=1,t.pageSize=10,t.disable=0},r=()=>{u.value&&(u.value.resetFields(),u.value.clearValidate());for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(t[s]=void 0);v(),b()},b=async()=>{const{rows:s,total:C}=await be(t);a.list=s,a.total=C};return{formData:t,loadData:b,searchFormRef:u,resetData:r,tableData:a,reloadData:v}}function ke(){const{t}=E(),a=F({brandCode:null,brandName:null,brandFullName:null,brandEnName:null,packageRequest:null,shippingMark:null,remark:null,disable:0}),u=h(),v=F({brandCode:A(t("brandInfo.brand_code")+t("brandInfo.input_tip1")),brandName:A(t("brandInfo.abbreviation")+t("brandInfo.input_tip1"))}),r=h(""),b=h(!1),s=h(!1),C=async()=>new Promise(async(m,f)=>{if(!u.value){f(!1);return}try{await u.value.validate(),a.id?await me(a):await ce(a),S(),le({type:"success",message:t("operate_success")}),m(!0)}catch(k){throw f(k),k}}),I=h(!1),i=async(m,f)=>{if(r.value=s.value?t("check_details"):m&&f?t("edit")+t("brandInfo.brand"):t("add")+t("brandInfo.brand"),b.value=!!(m&&f),w(),I.value=!0,f){const{data:k}=await fe(f);for(let x in k)Object.prototype.hasOwnProperty.call(k,x)&&(a[x]=k[x])}a.createTime=void 0,a.updateTime=void 0,a.createNickName=void 0,a.updateNickName=void 0,a.updateNickName=void 0,a.disable=0},w=()=>{u.value&&(u.value.resetFields(),u.value.clearValidate());for(let m in a)a[m]=void 0;a.disable=0},S=()=>{I.value=!1,s.value=!1,b.value=!1,w()};return{updateFormData:a,updateFormRef:u,updateFormRules:v,submit:C,showHandle:I,openHandle:i,closeHandle:S,title:r,disabled:b,isDetails:s,handleCheckDetail:m=>{s.value=!0,i(m,m.id)}}}const $=h([]),B=h();function Ne(t,a){async function u(r){const b=r.id||B.value,s=$.value.length>0&&$.value.every(w=>w.disable),C=!$.value.length&&r.disable,I=async()=>{await _e({ids:b}),B.value="",$.value=[],a.$modal.msgSuccess(t("operate_success"))},i=w=>a.$modal.confirm(w).then(I);s?await i(t("delete_tip1")):$.value.length?await i(t("delete_tip2")):C?await i(t("delete_tip4")):await i(t("delete_tip3"))}function v({rowList:r}){$.value=r;const b=r.map(s=>s.id);B.value=b.join(",")}return{deleteHandler:u,select:v,idList:$}}const ye={class:"app-container"},ve={class:"dialog-footer"},De=Object.assign({name:"Brand"},{__name:"index",setup(t){const{t:a}=E(),{proxy:u}=ue(),{pageData:v}=ge(),{formData:r,tableData:b,loadData:s,searchFormRef:C,resetData:I}=he(),{updateFormData:i,updateFormRef:w,updateFormRules:S,submit:H,openHandle:m,showHandle:f,closeHandle:k,title:x,disabled:z,isDetails:N,handleCheckDetail:G}=ke(),{deleteHandler:J,select:K,idList:M}=Ne(a,u),R=h(!0),X=h("");ne(()=>{s()});const Y=async()=>{await H(),await s()},T=async O=>{await J(O),await s()};return(O,d)=>{const _=g("el-input"),c=g("el-form-item"),p=g("el-col"),Z=g("el-checkbox"),y=g("el-button"),U=g("el-row"),P=g("el-form"),q=g("el-tooltip"),ee=g("el-tag"),ae=g("el-dialog");return L(),te("div",ye,[oe(l(P,{model:e(r),ref_key:"searchFormRef",ref:C,inline:!0,labelSuffix:":"},{default:n(()=>[l(U,{gutter:20},{default:n(()=>[l(p,{lg:5,sm:12,md:12,xs:24},{default:n(()=>[l(c,{label:e(a)("brandInfo.abbreviation"),prop:"brandName"},{default:n(()=>[l(_,{modelValue:e(r).brandName,"onUpdate:modelValue":d[0]||(d[0]=o=>e(r).brandName=o),placeholder:`${e(a)("input")}${e(a)("brandInfo.abbreviation")} `,clearable:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),l(p,{lg:5,sm:12,md:12,xs:24},{default:n(()=>[l(c,{label:e(a)("brandInfo.full_name"),prop:"brandFullName"},{default:n(()=>[l(_,{modelValue:e(r).brandFullName,"onUpdate:modelValue":d[1]||(d[1]=o=>e(r).brandFullName=o),placeholder:`${e(a)("input")}${e(a)("brandInfo.full_name")} `,clearable:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),l(p,{lg:5,sm:12,md:12,xs:24},{default:n(()=>[l(c,{label:e(a)("brandInfo.english_name"),prop:"brandEnName"},{default:n(()=>[l(_,{modelValue:e(r).brandEnName,"onUpdate:modelValue":d[2]||(d[2]=o=>e(r).brandEnName=o),placeholder:`${e(a)("input")}${e(a)("brandInfo.english_name")} `,clearable:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),l(p,{lg:2,sm:12,md:12,xs:24},{default:n(()=>[l(c,{label:"",prop:"delFlag"},{default:n(()=>[l(Z,{modelValue:e(r).disable,"onUpdate:modelValue":d[3]||(d[3]=o=>e(r).disable=o),onChange:e(s),"true-label":1,"false-label":0,label:e(a)("include_disable"),size:"large"},null,8,["modelValue","onChange","label"])]),_:1})]),_:1}),l(p,{lg:5,sm:12,md:12,xs:24},{default:n(()=>[l(c,null,{default:n(()=>[l(y,{type:"primary",icon:"Search",onClick:e(s)},{default:n(()=>[V(D(e(a)("query")),1)]),_:1},8,["onClick"]),l(y,{icon:"Refresh",onClick:e(I)},{default:n(()=>[V(D(e(a)("reset")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),[[de,e(R)]]),l(U,{gutter:10,class:"mb10 mt10"},{default:n(()=>[l(p,{span:1.5},{default:n(()=>[l(y,{type:"primary",plain:"",icon:"Plus",onClick:e(m)},{default:n(()=>[V(D(e(a)("add")),1)]),_:1},8,["onClick"])]),_:1}),l(p,{span:1.5},{default:n(()=>[l(y,{type:"danger",plain:"",icon:"Delete",disabled:!e(M).length,onClick:T},{default:n(()=>[V(D(e(a)("delete")),1)]),_:1},8,["disabled"])]),_:1})]),_:1}),l(pe,{loading:e(Q)().loading,onSelect:e(K),ref_key:"tableRef",ref:X,onQueryTable:e(s),showSearch:e(R),"onUpdate:showSearch":d[4]||(d[4]=o=>W(R)?R.value=o:null),"table-key":"brandId","row-key":"id",onHandleCurrentChange:e(s),total:e(b).total,showMultipleColumn:"",pageSize:e(r).pageSize,"onUpdate:pageSize":d[5]||(d[5]=o=>e(r).pageSize=o),pageNum:e(r).pageNum,"onUpdate:pageNum":d[6]||(d[6]=o=>e(r).pageNum=o),operateWidth:"100px",tableData:e(b).list,columnData:e(v).columnData,showSummary:!1,showOperate:!1,"show-multiple":!0,"show-multiple-column":!0,showPagination:!0},{operateDefault:n(({data:{row:o}})=>[l(q,{class:"box-item",effect:"dark",content:e(a)("check_details"),placement:"top-start"},{default:n(()=>[l(y,{link:"",type:"primary",icon:"View",onClick:j=>e(G)(o)},null,8,["onClick"])]),_:2},1032,["content"]),l(q,{class:"box-item",effect:"dark",content:e(a)("edit"),placement:"top-start"},{default:n(()=>[l(y,{link:"",type:"primary",icon:"Edit",onClick:j=>e(m)(o,o.id)},null,8,["onClick"])]),_:2},1032,["content"]),l(q,{class:"box-item",effect:"dark",content:e(a)("delete"),placement:"top-start"},{default:n(()=>[l(y,{link:"",type:"primary",icon:"Delete",disabled:!!e(M).length,onClick:j=>T(o)},null,8,["disabled","onClick"])]),_:2},1032,["content"])]),disableDefault:n(({data:{row:o}})=>[l(ee,{type:o.disable?"info":"success"},{default:n(()=>[V(D(o.disable?e(a)("disabled"):e(a)("normal")),1)]),_:2},1032,["type"])]),_:1},8,["loading","onSelect","onQueryTable","showSearch","onHandleCurrentChange","total","pageSize","pageNum","tableData","columnData"]),l(ae,{draggable:"",title:e(x),modelValue:e(f),"onUpdate:modelValue":d[14]||(d[14]=o=>W(f)?f.value=o:null),width:"500px","append-to-body":"",onClose:e(k)},{footer:n(()=>[re("div",ve,[e(N)?se("",!0):(L(),ie(y,{key:0,type:"primary",class:"btn-confirm",loading:e(Q)().loading,onClick:Y},{default:n(()=>[V(D(e(a)("confirm")),1)]),_:1},8,["loading"])),l(y,{class:"btn-cancel",onClick:e(k)},{default:n(()=>[V(D(e(N)?e(a)("close"):e(a)("cancel")),1)]),_:1},8,["onClick"])])]),default:n(()=>[l(P,{ref_key:"updateFormRef",ref:w,"label-position":"left",model:e(i),rules:e(S),"label-suffix":"ï¼š"},{default:n(()=>[l(U,{gutter:20},{default:n(()=>[l(p,{span:24},{default:n(()=>[l(c,{label:e(a)("brandInfo.brand_code"),prop:"brandCode"},{default:n(()=>[l(_,{modelValue:e(i).brandCode,"onUpdate:modelValue":d[7]||(d[7]=o=>e(i).brandCode=o),disabled:e(z)||e(N),clearable:"",placeholder:`${e(a)("input")}${e(a)("brandInfo.brand_code")} `},null,8,["modelValue","disabled","placeholder"])]),_:1},8,["label"])]),_:1}),l(p,{span:24},{default:n(()=>[l(c,{label:e(a)("brandInfo.abbreviation"),prop:"brandName"},{default:n(()=>[l(_,{modelValue:e(i).brandName,"onUpdate:modelValue":d[8]||(d[8]=o=>e(i).brandName=o),disabled:e(z)||e(N),clearable:"",placeholder:`${e(a)("input")}${e(a)("brandInfo.abbreviation")} `},null,8,["modelValue","disabled","placeholder"])]),_:1},8,["label"])]),_:1}),l(p,{span:24},{default:n(()=>[l(c,{label:e(a)("brandInfo.full_name"),prop:"brandFullName"},{default:n(()=>[l(_,{modelValue:e(i).brandFullName,"onUpdate:modelValue":d[9]||(d[9]=o=>e(i).brandFullName=o),clearable:"",disabled:e(N),placeholder:`${e(a)("input")}${e(a)("brandInfo.full_name")} `},null,8,["modelValue","disabled","placeholder"])]),_:1},8,["label"])]),_:1}),l(p,{span:24},{default:n(()=>[l(c,{label:e(a)("brandInfo.english_name"),prop:"brandEnName"},{default:n(()=>[l(_,{modelValue:e(i).brandEnName,"onUpdate:modelValue":d[10]||(d[10]=o=>e(i).brandEnName=o),clearable:"",disabled:e(N),placeholder:`${e(a)("input")}${e(a)("brandInfo.english_name")} `},null,8,["modelValue","disabled","placeholder"])]),_:1},8,["label"])]),_:1}),l(p,{span:24},{default:n(()=>[l(c,{label:e(a)("brandInfo.packaging_requirements"),prop:"packageRequest"},{default:n(()=>[l(_,{modelValue:e(i).packageRequest,"onUpdate:modelValue":d[11]||(d[11]=o=>e(i).packageRequest=o),clearable:"",disabled:e(N),placeholder:`${e(a)("input")}${e(a)("brandInfo.packaging_requirements")} `},null,8,["modelValue","disabled","placeholder"])]),_:1},8,["label"])]),_:1}),l(p,{span:24},{default:n(()=>[l(c,{label:e(a)("brandInfo.shipping_requirements"),prop:"shippingMark"},{default:n(()=>[l(_,{modelValue:e(i).shippingMark,"onUpdate:modelValue":d[12]||(d[12]=o=>e(i).shippingMark=o),clearable:"",disabled:e(N),placeholder:`${e(a)("input")}${e(a)("brandInfo.shipping_requirements")} `},null,8,["modelValue","disabled","placeholder"])]),_:1},8,["label"])]),_:1}),l(p,{span:24},{default:n(()=>[l(c,{label:e(a)("brandInfo.remark"),prop:"remark"},{default:n(()=>[l(_,{modelValue:e(i).remark,"onUpdate:modelValue":d[13]||(d[13]=o=>e(i).remark=o),type:"textarea",disabled:e(N),clearable:"",placeholder:`${e(a)("input")}${e(a)("brandInfo.remark")} `},null,8,["modelValue","disabled","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue","onClose"])])}}});export{De as default};
