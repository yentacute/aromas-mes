import{V as h,r as f,e as te,N as oe,h as m,K as ne,o as B,c as ae,L as S,M as E,k as l,i as e,j as n,p as ue,x as _,I as F,s as re,n as K,t as de,$ as ce,H as me,z as ie}from"./index-BP30Yz_m.js";function pe(i){return h({url:"/bok/createDocument/list",method:"get",params:i})}function se(i){return h({url:"/bok/createDocument/"+i,method:"get"})}function fe(i){return h({url:"/bok/createDocument",method:"post",data:i})}function ge(i){return h({url:"/bok/createDocument",method:"put",data:i})}function be(i){return h({url:"/bok/createDocument/"+i,method:"delete"})}const _e={class:"app-container"},De={class:"dialog-footer"},he=me({name:"CreateDocument"}),ye=Object.assign(he,{setup(i){const{proxy:g}=ie(),x=f([]),b=f(!1),v=f(!0),V=f(!0),C=f([]),T=f(!0),$=f(!0),N=f(0),k=f(""),P=te({form:{},queryParams:{pageNum:1,pageSize:10,productionDocumentNum:null},rules:{}}),{queryParams:p,form:a,rules:Y}=oe(P);function D(){v.value=!0,pe(p.value).then(u=>{x.value=u.rows,N.value=u.total,v.value=!1})}function L(){b.value=!1,U()}function U(){a.value={createDocumentId:null,productionDocumentNum:null,styleNum:null,formatNum:null,styleColour:null,size:null,quantity:null,clothNum:null,clothColour:null,clothDemand:null,clothUnit:null,process:null,productionDocumentTime:null,createUserId:null,createTime:null,updateUserId:null,updateTime:null,delFlag:null},g.resetForm("createDocumentRef")}function w(){p.value.pageNum=1,D()}function M(){g.resetForm("queryRef"),w()}function Q(u){C.value=u.map(t=>t.createDocumentId),T.value=u.length!=1,$.value=!u.length}function j(){U(),b.value=!0,k.value="添加制单"}function I(u){U();const t=u.createDocumentId||C.value;se(t).then(d=>{a.value=d.data,b.value=!0,k.value="修改制单"})}function A(){g.$refs.createDocumentRef.validate(u=>{u&&(a.value.createDocumentId!=null?ge(a.value).then(t=>{g.$modal.msgSuccess("修改成功"),b.value=!1,D()}):fe(a.value).then(t=>{g.$modal.msgSuccess("新增成功"),b.value=!1,D()}))})}function q(u){const t=u.createDocumentId||C.value;g.$modal.confirm('是否确认删除制单编号为"'+t+'"的数据项？').then(function(){return be(t)}).then(()=>{D(),g.$modal.msgSuccess("删除成功")}).catch(()=>{})}function H(){g.download("bok/createDocument/export",{...p.value},`createDocument_${new Date().getTime()}.xlsx`)}return D(),(u,t)=>{const d=m("el-input"),c=m("el-form-item"),s=m("el-button"),z=m("el-form"),y=m("el-col"),O=m("right-toolbar"),G=m("el-row"),r=m("el-table-column"),R=m("el-tooltip"),J=m("el-table"),W=m("pagination"),X=m("el-date-picker"),Z=m("el-dialog"),ee=ne("loading");return B(),ae("div",_e,[S(e(z,{model:l(p),ref:"queryRef",inline:!0},{default:n(()=>[e(c,{label:`\r
生产制单号`,prop:"productionDocumentNum"},{default:n(()=>[e(d,{modelValue:l(p).productionDocumentNum,"onUpdate:modelValue":t[0]||(t[0]=o=>l(p).productionDocumentNum=o),placeholder:`请输入\r
生产制单号`,clearable:"",onKeyup:ue(w,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(c,null,{default:n(()=>[e(s,{type:"primary",icon:"Search",onClick:w},{default:n(()=>[_("搜索")]),_:1}),e(s,{icon:"Refresh",onClick:M},{default:n(()=>[_("重置")]),_:1})]),_:1})]),_:1},8,["model"]),[[E,l(V)]]),e(G,{gutter:10,class:"mb8"},{default:n(()=>[e(y,{span:1.5},{default:n(()=>[e(s,{type:"primary",plain:"",icon:"Plus",onClick:j},{default:n(()=>[_("新增")]),_:1})]),_:1}),e(y,{span:1.5},{default:n(()=>[e(s,{type:"success",plain:"",icon:"Edit",disabled:l(T),onClick:I},{default:n(()=>[_("修改")]),_:1},8,["disabled"])]),_:1}),e(y,{span:1.5},{default:n(()=>[e(s,{type:"danger",plain:"",icon:"Delete",disabled:l($),onClick:q},{default:n(()=>[_("删除")]),_:1},8,["disabled"])]),_:1}),e(y,{span:1.5},{default:n(()=>[e(s,{type:"warning",plain:"",icon:"Download",onClick:H,class:"btn-export"},{default:n(()=>[_("导出")]),_:1})]),_:1}),e(O,{showSearch:l(V),"onUpdate:showSearch":t[1]||(t[1]=o=>F(V)?V.value=o:null),onQueryTable:D},null,8,["showSearch"])]),_:1}),S((B(),re(J,{data:l(x),onSelectionChange:Q,border:""},{default:n(()=>[e(r,{type:"selection",width:"55",align:"center"}),e(r,{type:"index",width:"150",label:u.$t("serial_number"),align:"center"},null,8,["label"]),e(r,{label:`\r
生产制单号`,align:"center",prop:"productionDocumentNum"}),e(r,{label:"款号",align:"center",prop:"styleNum"}),e(r,{label:"版号",align:"center",prop:"formatNum"}),e(r,{label:"款号颜色",align:"center",prop:"styleColour"}),e(r,{label:"尺码",align:"center",prop:"size"}),e(r,{label:"数量",align:"center",prop:"quantity"}),e(r,{label:"布料编号",align:"center",prop:"clothNum"}),e(r,{label:"布料颜色",align:"center",prop:"clothColour"}),e(r,{label:"布料需求量 ",align:"center",prop:"clothDemand"}),e(r,{label:"需求量单位",align:"center",prop:"clothUnit"}),e(r,{label:"制程",align:"center",prop:"process"}),e(r,{label:"生产制单日期",align:"center",prop:"productionDocumentTime",width:"180"},{default:n(o=>[K("span",null,de(u.parseTime(o.row.productionDocumentTime,"{y}-{m}-{d}")),1)]),_:1}),e(r,{label:"操作",align:"center","class-name":"small-padding fixed-width",fixed:"right"},{default:n(({row:o})=>[e(R,{class:"box-item",effect:"dark",content:u.$t("edit"),placement:"top-start"},{default:n(()=>[e(s,{link:"",type:"primary",icon:"Edit",onClick:le=>I(o)},null,8,["onClick"])]),_:2},1032,["content"]),e(R,{class:"box-item",effect:"dark",content:u.$t("delete"),placement:"top-start"},{default:n(()=>[e(s,{link:"",type:"primary",icon:"Delete",onClick:le=>q(o)},null,8,["onClick"])]),_:2},1032,["content"])]),_:1})]),_:1},8,["data"])),[[ee,l(v)]]),S(e(W,{total:l(N),page:l(p).pageNum,"onUpdate:page":t[2]||(t[2]=o=>l(p).pageNum=o),limit:l(p).pageSize,"onUpdate:limit":t[3]||(t[3]=o=>l(p).pageSize=o),onPagination:D},null,8,["total","page","limit"]),[[E,l(N)>0]]),e(Z,{title:l(k),modelValue:l(b),"onUpdate:modelValue":t[16]||(t[16]=o=>F(b)?b.value=o:null),width:"500px","append-to-body":""},{footer:n(()=>[K("div",De,[e(s,{type:"primary",loading:l(ce)().loading,onClick:A},{default:n(()=>[_("确 定")]),_:1},8,["loading"]),e(s,{onClick:L,class:"btn-cancel"},{default:n(()=>[_("取 消")]),_:1})])]),default:n(()=>[e(z,{ref:"createDocumentRef",model:l(a),rules:l(Y),"label-width":"80px"},{default:n(()=>[e(c,{label:`\r
生产制单号`,prop:"productionDocumentNum"},{default:n(()=>[e(d,{modelValue:l(a).productionDocumentNum,"onUpdate:modelValue":t[4]||(t[4]=o=>l(a).productionDocumentNum=o),placeholder:`请输入\r
生产制单号`},null,8,["modelValue"])]),_:1}),e(c,{label:"款号",prop:"styleNum"},{default:n(()=>[e(d,{modelValue:l(a).styleNum,"onUpdate:modelValue":t[5]||(t[5]=o=>l(a).styleNum=o),placeholder:"请输入款号"},null,8,["modelValue"])]),_:1}),e(c,{label:"版号",prop:"formatNum"},{default:n(()=>[e(d,{modelValue:l(a).formatNum,"onUpdate:modelValue":t[6]||(t[6]=o=>l(a).formatNum=o),placeholder:"请输入版号"},null,8,["modelValue"])]),_:1}),e(c,{label:"款号颜色",prop:"styleColour"},{default:n(()=>[e(d,{modelValue:l(a).styleColour,"onUpdate:modelValue":t[7]||(t[7]=o=>l(a).styleColour=o),placeholder:"请输入款号颜色"},null,8,["modelValue"])]),_:1}),e(c,{label:"尺码",prop:"size"},{default:n(()=>[e(d,{modelValue:l(a).size,"onUpdate:modelValue":t[8]||(t[8]=o=>l(a).size=o),placeholder:"请输入尺码"},null,8,["modelValue"])]),_:1}),e(c,{label:"数量",prop:"quantity"},{default:n(()=>[e(d,{modelValue:l(a).quantity,"onUpdate:modelValue":t[9]||(t[9]=o=>l(a).quantity=o),placeholder:"请输入数量"},null,8,["modelValue"])]),_:1}),e(c,{label:"布料编号",prop:"clothNum"},{default:n(()=>[e(d,{modelValue:l(a).clothNum,"onUpdate:modelValue":t[10]||(t[10]=o=>l(a).clothNum=o),placeholder:"请输入布料编号"},null,8,["modelValue"])]),_:1}),e(c,{label:"布料颜色",prop:"clothColour"},{default:n(()=>[e(d,{modelValue:l(a).clothColour,"onUpdate:modelValue":t[11]||(t[11]=o=>l(a).clothColour=o),placeholder:"请输入布料颜色"},null,8,["modelValue"])]),_:1}),e(c,{label:"布料需求量 ",prop:"clothDemand"},{default:n(()=>[e(d,{modelValue:l(a).clothDemand,"onUpdate:modelValue":t[12]||(t[12]=o=>l(a).clothDemand=o),placeholder:"请输入布料需求量 "},null,8,["modelValue"])]),_:1}),e(c,{label:"需求量单位",prop:"clothUnit"},{default:n(()=>[e(d,{modelValue:l(a).clothUnit,"onUpdate:modelValue":t[13]||(t[13]=o=>l(a).clothUnit=o),placeholder:"请输入需求量单位"},null,8,["modelValue"])]),_:1}),e(c,{label:"制程",prop:"process"},{default:n(()=>[e(d,{modelValue:l(a).process,"onUpdate:modelValue":t[14]||(t[14]=o=>l(a).process=o),placeholder:"请输入制程"},null,8,["modelValue"])]),_:1}),e(c,{label:"生产制单日期",prop:"productionDocumentTime"},{default:n(()=>[e(X,{clearable:"",modelValue:l(a).productionDocumentTime,"onUpdate:modelValue":t[15]||(t[15]=o=>l(a).productionDocumentTime=o),type:"date","value-format":"YYYY-MM-DD",placeholder:"请选择生产制单日期"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}});export{ye as default};
