import{b as U,e as S,r as _,D as Y,h as d,o as j,c as L,i as l,j as t,n as E,k as e,$ as I,x as k,t as w,L as G,I as D,M as W}from"./index-BP30Yz_m.js";import{d as A,C as J}from"./index-DTWQQqpJ.js";import{e as K}from"./fabricPicking-8HIwl1N_.js";function X(){const{t:a}=U();return{pageData:S({columnData:[{label:a("stockFabric.fabricCode"),prop:"fabricCode",width:"150",fixed:"left"},{label:a("stockFabric.fabricName"),prop:"fabricName",width:"150",fixed:"left"},{label:a("stockFabric.specification"),prop:"specification",width:"150"},{label:a("stockFabric.component"),prop:"component",width:"150"},{label:a("stockFabric.roll"),prop:"roll",width:"auto"},{label:a("stockFabric.grade"),prop:"grade",width:"auto"},{label:a("stockFabric.quantity"),prop:"quantity",width:"150"},{label:a("stockFabric.inventoryQuantity"),prop:"inventoryQuantity",width:"150"},{label:a("stockFabric.styleNo"),prop:"styleNo",width:"150"},{label:a("stockFabric.lot"),prop:"lot",width:"150"},{label:a("stockFabric.colorName"),prop:"colorName",width:"150"},{label:a("stockFabric.locationCode"),prop:"locationCode",width:"150"},{label:a("stockFabric.containerCode"),prop:"containerCode",width:"180"},{label:a("stockFabric.unitCode"),prop:"unitCode",width:"150"},{label:a("stockFabric.qrcode"),prop:"qrcode",width:"180"},{label:a("createTime"),prop:"createTime",width:"180"}]})}}function Z(){const a=S({pageSize:10,pageNum:1,fabricCode:null,colorName:null,width:null,lot:null,styleNo:null,startTime:"",endTime:"",eliminateIds:""}),b=S({list:[],total:0}),s=_([]),c=_(),f=()=>{a.pageNum=1,a.pageSize=10,s.value=[]},o=()=>{c.value&&(c.value.resetFields(),c.value.clearValidate());for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&(a[r]=void 0);f(),y()},y=async()=>{a.startTime=s.value[0],a.endTime=s.value[1];const{rows:r,total:C}=await K(a);b.list=r,b.total=C};return{formData:a,loadData:y,searchFormRef:c,resetData:o,tableData:b,reloadData:f,time:s}}const ee={class:"app-container"},le={class:"dialog-footer"},re=Object.assign({name:"InventoryPopup"},{__name:"index",props:{modelValue:{type:Boolean,default:!1},width:{type:String,default:"65%"},eliminateIds:{type:String,default:""}},emits:["select","update:modelValue"],setup(a,{emit:b}){const s=a,c=b,f=Y(()=>s.modelValue),{t:o}=U(),{pageData:y}=X(),{formData:r,tableData:C,loadData:F,searchFormRef:z,resetData:T,time:v}=Z(),V=_(!0),R=_(""),h=_([]),q=()=>{s.eliminateIds&&(r.eliminateIds=s.eliminateIds),F()},O=p=>{h.value=p.rowList},P=async()=>{c("select",h.value),c("update:modelValue",!1),h.value=[]},$=()=>{c("update:modelValue",!1),r.eliminateIds="",h.value=[],T()};return(p,n)=>{const g=d("el-input"),m=d("el-form-item"),u=d("el-col"),B=d("el-tag"),N=d("el-button"),x=d("el-row"),H=d("el-date-picker"),M=d("el-form"),Q=d("el-dialog");return j(),L("div",ee,[l(Q,{"destroy-on-close":"",modelValue:e(f),"onUpdate:modelValue":n[9]||(n[9]=i=>D(f)?f.value=i:null),onOpen:q,title:e(o)("wmsPicking.inventory"),draggable:"",width:s.width,"align-center":"","close-on-click-modal":!1,onClose:$},{footer:t(()=>[E("div",le,[l(N,{type:"primary",class:"btn-confirm",loading:e(I)().loading,onClick:P},{default:t(()=>[k(w(e(o)("confirm")),1)]),_:1},8,["loading"]),l(N,{class:"btn-cancel",onClick:$},{default:t(()=>[k(w(e(o)("cancel")),1)]),_:1})])]),default:t(()=>[l(M,{model:e(r),ref_key:"searchFormRef",ref:z,inline:!0,labelSuffix:":"},{default:t(()=>[l(x,{gutter:20},{default:t(()=>[l(u,{lg:5,sm:12,md:12,xs:24},{default:t(()=>[l(m,{label:e(o)("stockFabric.fabricCode"),prop:"fabricCode"},{default:t(()=>[l(g,{modelValue:e(r).fabricCode,"onUpdate:modelValue":n[0]||(n[0]=i=>e(r).fabricCode=i),placeholder:`${e(o)("input")}${e(o)("stockFabric.fabricCode")} `,clearable:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),l(u,{lg:5,sm:12,md:12,xs:24},{default:t(()=>[l(m,{label:e(o)("stockFabric.colorName"),prop:"colorName"},{default:t(()=>[l(g,{modelValue:e(r).colorName,"onUpdate:modelValue":n[1]||(n[1]=i=>e(r).colorName=i),placeholder:`${e(o)("input")}${e(o)("stockFabric.colorName")} `,clearable:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),l(u,{lg:5,sm:12,md:12,xs:24},{default:t(()=>[l(m,{label:e(o)("stockFabric.width"),prop:"width"},{default:t(()=>[l(g,{modelValue:e(r).width,"onUpdate:modelValue":n[2]||(n[2]=i=>e(r).width=i),placeholder:`${e(o)("input")}${e(o)("stockFabric.width")} `,clearable:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),l(u,{lg:2,sm:12,md:12,xs:24,class:"mt5"},{default:t(()=>[l(B,null,{default:t(()=>[k("已选:"+w(e(h).length||0),1)]),_:1})]),_:1}),l(u,{lg:6,sm:12,md:12,xs:24},{default:t(()=>[l(m,null,{default:t(()=>[l(N,{type:"primary",icon:"Search",onClick:e(F)},{default:t(()=>[k(w(e(o)("query")),1)]),_:1},8,["onClick"]),l(N,{icon:"Refresh",onClick:e(T)},{default:t(()=>[k(w(e(o)("reset")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),G(l(x,{gutter:20},{default:t(()=>[l(u,{lg:5,sm:12,md:12,xs:24},{default:t(()=>[l(m,{label:e(o)("stockFabric.lot"),prop:"lot"},{default:t(()=>[l(g,{modelValue:e(r).lot,"onUpdate:modelValue":n[3]||(n[3]=i=>e(r).lot=i),placeholder:`${e(o)("input")}${e(o)("stockFabric.lot")} `,clearable:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),l(u,{lg:5,sm:12,md:12,xs:24},{default:t(()=>[l(m,{label:e(o)("stockFabric.styleNo"),prop:"styleNo"},{default:t(()=>[l(g,{modelValue:e(r).styleNo,"onUpdate:modelValue":n[4]||(n[4]=i=>e(r).styleNo=i),placeholder:`${e(o)("input")}${e(o)("stockFabric.styleNo")} `,clearable:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),l(u,{lg:9,sm:12,md:12,xs:24},{default:t(()=>[l(m,{label:e(o)("searchTab.time"),prop:"startTime"},{default:t(()=>[l(H,{clearable:"",modelValue:e(v),"onUpdate:modelValue":n[5]||(n[5]=i=>D(v)?v.value=i:null),type:"datetimerange","unlink-panels":"","default-time":e(A),"value-format":"YYYY-MM-DD HH:mm:ss","range-separator":p.$t("searchTab.to"),"start-placeholder":p.$t("searchTab.startTime"),"end-placeholder":p.$t("searchTab.endTime"),placeholder:`${p.$t("choose")}${p.$t("upload_time")}`},null,8,["modelValue","default-time","range-separator","start-placeholder","end-placeholder","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1},512),[[W,e(V)]])]),_:1},8,["model"]),l(J,{loading:e(I)().loading,showSearch:e(V),"onUpdate:showSearch":n[6]||(n[6]=i=>D(V)?V.value=i:null),onSelect:O,ref_key:"tableRef",ref:R,onQueryTable:e(F),"table-key":"InventoryPopupId",onHandleCurrentChange:e(F),total:e(C).total,showMultipleColumn:"",pageSize:e(r).pageSize,"onUpdate:pageSize":n[7]||(n[7]=i=>e(r).pageSize=i),pageNum:e(r).pageNum,"onUpdate:pageNum":n[8]||(n[8]=i=>e(r).pageNum=i),operateWidth:"100px",tableData:e(C).list,columnData:e(y).columnData,showSummary:!1,showOperate:!1,"show-multiple":!0,"show-multiple-column":!0,showPagination:!0},null,8,["loading","showSearch","onQueryTable","onHandleCurrentChange","total","pageSize","pageNum","tableData","columnData"])]),_:1},8,["modelValue","title","width"])])}}});export{re as default};
