import{V as C,r as f,e as ee,N as le,h as p,K as oe,o as $,c as te,L as U,M as q,k as o,i as e,j as a,p as K,x as k,I as W,s as ae,n as ne,H as ue,z as re}from"./index-BP30Yz_m.js";function de(c){return C({url:"/bok/task/list",method:"get",params:c})}function ie(c){return C({url:"/bok/task/"+c,method:"get"})}function se(c){return C({url:"/bok/task",method:"post",data:c})}function pe(c){return C({url:"/bok/task",method:"put",data:c})}function ce(c){return C({url:"/bok/task/"+c,method:"delete"})}const me={class:"app-container"},fe={class:"dialog-footer"},be=ue({name:"TaskScheduling"}),ke=Object.assign(be,{setup(c){const{proxy:b}=re(),D=f([]),g=f(!1),y=f(!0),h=f(!0),w=f([]),L=f(!0),I=f(!0),T=f(0),x=f(""),z=ee({form:{},queryParams:{pageNum:1,pageSize:10,taskCode:null,taskType:null,robotCode:null},rules:{containerCode:[{required:!0,message:"容器编号不能为空",trigger:"blur"}],containerType:[{required:!0,message:"容器类型不能为空",trigger:"change"}]}}),{queryParams:i,form:n,rules:B}=le(z);function _(){y.value=!0,de(i.value).then(r=>{D.value=r.rows,T.value=r.total,y.value=!1})}function P(){g.value=!1,S()}function S(){n.value={taskId:null,taskCode:null,taskType:null,robotCode:null,robotType:null,containerCode:null,containerType:null,fromLocationCode:null,toLocationCode:null,executionStartTime:null,executionEndTime:null,executionDuration:null,taskStatus:null,belongWarehouse:null,isDelete:null,createUserId:null,createUserName:null,createTime:null,updateTime:null},b.resetForm("taskRef")}function V(){i.value.pageNum=1,_()}function F(){b.resetForm("queryRef"),V()}function Q(r){w.value=r.map(l=>l.taskId),L.value=r.length!=1,I.value=!r.length}function j(){S(),g.value=!0,x.value="添加任务调度"}function E(r){S();const l=r.taskId||w.value;ie(l).then(d=>{n.value=d.data,g.value=!0,x.value="修改任务调度"})}function A(){b.$refs.taskRef.validate(r=>{r&&(n.value.taskId!=null?pe(n.value).then(l=>{b.$modal.msgSuccess("修改成功"),g.value=!1,_()}):se(n.value).then(l=>{b.$modal.msgSuccess("新增成功"),g.value=!1,_()}))})}function N(r){const l=r.taskId||w.value;b.$modal.confirm('是否确认删除任务调度编号为"'+l+'"的数据项？').then(function(){return ce(l)}).then(()=>{_(),b.$modal.msgSuccess("删除成功")}).catch(()=>{})}function H(){b.download("bok/task/export",{...i.value},`task_${new Date().getTime()}.xlsx`)}return _(),(r,l)=>{const d=p("el-input"),s=p("el-form-item"),m=p("el-button"),R=p("el-form"),v=p("el-col"),M=p("right-toolbar"),O=p("el-row"),u=p("el-table-column"),G=p("el-table"),J=p("pagination"),X=p("el-dialog"),Y=oe("loading");return $(),te("div",me,[U(e(R,{model:o(i),ref:"queryRef",inline:!0},{default:a(()=>[e(s,{label:"任务编码",prop:"taskCode"},{default:a(()=>[e(d,{modelValue:o(i).taskCode,"onUpdate:modelValue":l[0]||(l[0]=t=>o(i).taskCode=t),placeholder:"请输入任务编码",clearable:"",onKeyup:K(V,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(s,{label:"机器人编码",prop:"robotCode"},{default:a(()=>[e(d,{modelValue:o(i).robotCode,"onUpdate:modelValue":l[1]||(l[1]=t=>o(i).robotCode=t),placeholder:"请输入机器人编码",clearable:"",onKeyup:K(V,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(s,null,{default:a(()=>[e(m,{type:"primary",icon:"Search",onClick:V},{default:a(()=>[k("搜索")]),_:1}),e(m,{icon:"Refresh",onClick:F},{default:a(()=>[k("重置")]),_:1})]),_:1})]),_:1},8,["model"]),[[q,o(h)]]),e(O,{gutter:10,class:"mb8"},{default:a(()=>[e(v,{span:1.5},{default:a(()=>[e(m,{type:"primary",plain:"",icon:"Plus",onClick:j},{default:a(()=>[k("新增")]),_:1})]),_:1}),e(v,{span:1.5},{default:a(()=>[e(m,{type:"success",plain:"",icon:"Edit",disabled:o(L),onClick:E},{default:a(()=>[k("修改")]),_:1},8,["disabled"])]),_:1}),e(v,{span:1.5},{default:a(()=>[e(m,{type:"danger",plain:"",icon:"Delete",disabled:o(I),onClick:N},{default:a(()=>[k("删除")]),_:1},8,["disabled"])]),_:1}),e(v,{span:1.5},{default:a(()=>[e(m,{type:"warning",plain:"",icon:"Download",onClick:H,class:"btn-export"},{default:a(()=>[k("导出")]),_:1})]),_:1}),e(M,{showSearch:o(h),"onUpdate:showSearch":l[2]||(l[2]=t=>W(h)?h.value=t:null),onQueryTable:_},null,8,["showSearch"])]),_:1}),U(($(),ae(G,{data:o(D),onSelectionChange:Q},{default:a(()=>[e(u,{type:"selection",width:"55",align:"center"}),e(u,{label:"任务编码",width:"200",align:"center",prop:"taskCode"}),e(u,{label:"任务类型",width:"100",align:"center",prop:"taskType"}),e(u,{label:"容器编号",width:"200",align:"center",prop:"containerCode"}),e(u,{label:"容器类型",width:"200",align:"center",prop:"containerType"}),e(u,{label:"起始库位",width:"200",align:"center",prop:"fromLocationCode"}),e(u,{label:"目标库位",width:"200",align:"center",prop:"toLocationCode"}),e(u,{label:"机器人编码",width:"200",align:"center",prop:"robotCode"}),e(u,{label:"机器人类型",width:"200",align:"center",prop:"robotType"}),e(u,{label:"执行开始时间",width:"200",align:"center",prop:"executionStartTime"}),e(u,{label:"执行结束时间",width:"200",align:"center",prop:"executionEndTime"}),e(u,{label:"执行时长",align:"center",prop:"executionDuration"}),e(u,{label:"任务状态",align:"center",prop:"taskStatus"}),e(u,{label:"归属仓库",align:"center",prop:"belongWarehouse"}),e(u,{label:"操作",align:"center","class-name":"small-padding fixed-width"},{default:a(t=>[e(m,{link:"",type:"primary",icon:"Edit",onClick:Z=>E(t.row)},null,8,["onClick"]),e(m,{link:"",type:"primary",icon:"Delete",onClick:Z=>N(t.row)},null,8,["onClick"])]),_:1})]),_:1},8,["data"])),[[Y,o(y)]]),U(e(J,{total:o(T),page:o(i).pageNum,"onUpdate:page":l[3]||(l[3]=t=>o(i).pageNum=t),limit:o(i).pageSize,"onUpdate:limit":l[4]||(l[4]=t=>o(i).pageSize=t),onPagination:_},null,8,["total","page","limit"]),[[q,o(T)>0]]),e(X,{title:o(x),modelValue:o(g),"onUpdate:modelValue":l[14]||(l[14]=t=>W(g)?g.value=t:null),width:"500px","append-to-body":""},{footer:a(()=>[ne("div",fe,[e(m,{type:"primary",class:"btn-confirm",onClick:A},{default:a(()=>[k("确 定")]),_:1}),e(m,{onClick:P,class:"btn-cancel"},{default:a(()=>[k("取 消")]),_:1})])]),default:a(()=>[e(R,{ref:"taskRef",model:o(n),rules:o(B)},{default:a(()=>[e(s,{label:"任务编码",prop:"taskCode"},{default:a(()=>[e(d,{modelValue:o(n).taskCode,"onUpdate:modelValue":l[5]||(l[5]=t=>o(n).taskCode=t),placeholder:"请输入任务编码"},null,8,["modelValue"])]),_:1}),e(s,{label:"机器人编码",prop:"robotCode"},{default:a(()=>[e(d,{modelValue:o(n).robotCode,"onUpdate:modelValue":l[6]||(l[6]=t=>o(n).robotCode=t),placeholder:"请输入机器人编码"},null,8,["modelValue"])]),_:1}),e(s,{label:"容器编号",prop:"containerCode"},{default:a(()=>[e(d,{modelValue:o(n).containerCode,"onUpdate:modelValue":l[7]||(l[7]=t=>o(n).containerCode=t),placeholder:"请输入容器编号"},null,8,["modelValue"])]),_:1}),e(s,{label:"起始库位",prop:"fromLocationCode"},{default:a(()=>[e(d,{modelValue:o(n).fromLocationCode,"onUpdate:modelValue":l[8]||(l[8]=t=>o(n).fromLocationCode=t),placeholder:"请输入起始库位"},null,8,["modelValue"])]),_:1}),e(s,{label:"目标库位",prop:"toLocationCode"},{default:a(()=>[e(d,{modelValue:o(n).toLocationCode,"onUpdate:modelValue":l[9]||(l[9]=t=>o(n).toLocationCode=t),placeholder:"请输入目标库位"},null,8,["modelValue"])]),_:1}),e(s,{label:"执行开始时间",prop:"executionStartTime"},{default:a(()=>[e(d,{modelValue:o(n).executionStartTime,"onUpdate:modelValue":l[10]||(l[10]=t=>o(n).executionStartTime=t),placeholder:"请输入执行开始时间"},null,8,["modelValue"])]),_:1}),e(s,{label:"执行结束时间",prop:"executionEndTime"},{default:a(()=>[e(d,{modelValue:o(n).executionEndTime,"onUpdate:modelValue":l[11]||(l[11]=t=>o(n).executionEndTime=t),placeholder:"请输入执行结束时间"},null,8,["modelValue"])]),_:1}),e(s,{label:"执行时长",prop:"executionDuration"},{default:a(()=>[e(d,{modelValue:o(n).executionDuration,"onUpdate:modelValue":l[12]||(l[12]=t=>o(n).executionDuration=t),placeholder:"请输入执行时长"},null,8,["modelValue"])]),_:1}),e(s,{label:"归属仓库",prop:"belongWarehouse"},{default:a(()=>[e(d,{modelValue:o(n).belongWarehouse,"onUpdate:modelValue":l[13]||(l[13]=t=>o(n).belongWarehouse=t),placeholder:"请输入归属仓库"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}});export{ke as default};
