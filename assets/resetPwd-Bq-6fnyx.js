import{d as y}from"./user-TxY_T3CH.js";import{b as V,e as h,r as x,h as u,o as q,s as C,j as l,i as a,k as s,x as m,t as c,z as k}from"./index-BP30Yz_m.js";const B={__name:"resetPwd",setup(v){const{t:e}=V(),{proxy:p}=k(),r=h({oldPassword:void 0,newPassword:void 0,confirmPassword:void 0}),f=(w,o,d)=>{r.newPassword!==o?d(new Error(e("user.tip11"))):d()},P=x({oldPassword:[{required:!0,message:e("user.oldPassword")+e("cannot_empty"),trigger:"blur"}],newPassword:[{required:!0,message:e("user.newPassword")+e("cannot_empty"),trigger:"blur"},{min:6,max:20,message:e("user.tip12"),trigger:"blur"},{pattern:/^[^<>"'|\\]+$/,message:`不能包含非法字符：< > " ' \\ |`,trigger:"blur"}],confirmPassword:[{required:!0,message:e("user.confirmPassword")+e("cannot_empty"),trigger:"blur"},{required:!0,validator:f,trigger:"blur"}]});function _(){p.$refs.pwdRef.validate(w=>{w&&y(r.oldPassword,r.newPassword).then(o=>{p.$modal.msgSuccess(e("edit")+e("success"))})})}function g(){p.$tab.closePage()}return(w,o)=>{const d=u("el-input"),n=u("el-form-item"),i=u("el-button"),b=u("el-form");return q(),C(b,{ref:"pwdRef",model:s(r),rules:s(P)},{default:l(()=>[a(n,{label:s(e)("user.oldPassword"),prop:"oldPassword"},{default:l(()=>[a(d,{modelValue:s(r).oldPassword,"onUpdate:modelValue":o[0]||(o[0]=t=>s(r).oldPassword=t),placeholder:s(e)("input")+s(e)("user.oldPassword"),type:"password","show-password":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(n,{label:s(e)("user.newPassword"),prop:"newPassword"},{default:l(()=>[a(d,{modelValue:s(r).newPassword,"onUpdate:modelValue":o[1]||(o[1]=t=>s(r).newPassword=t),placeholder:s(e)("input")+s(e)("user.newPassword"),type:"password","show-password":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(n,{label:s(e)("user.confirmPassword"),prop:"confirmPassword"},{default:l(()=>[a(d,{modelValue:s(r).confirmPassword,"onUpdate:modelValue":o[2]||(o[2]=t=>s(r).confirmPassword=t),placeholder:s(e)("input")+s(e)("user.confirmPassword"),type:"password","show-password":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(n,null,{default:l(()=>[a(i,{type:"primary",class:"btn-confirm",onClick:_},{default:l(()=>[m(c(s(e)("user.confirmPassword")),1)]),_:1}),a(i,{type:"danger",onClick:g},{default:l(()=>[m(c(s(e)("close")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])}}};export{B as default};
