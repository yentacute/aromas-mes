import{b as A,e as P,r as h,W as ce,f as re,h as _,o as q,c as ie,L as ye,M as fe,k as e,i as l,j as o,p as L,x as D,t as w,$ as Q,I as B,n as T,O as be,s as ge,v as _e,aj as G,z as he}from"./index-BP30Yz_m.js";import{C as Ve}from"./index-DTWQQqpJ.js";import{l as ke,u as Ce,a as Ne,g as we,d as ve}from"./company-DLRspPOb.js";import{r as j}from"./verify-D2E6NcQX.js";function xe(){const{t:m}=A();return{pageData:P({columnData:[{label:m("company.country"),prop:"country",width:"auto",fixed:"left"},{label:m("company.short-name"),prop:"companyShortName",width:"auto",fixed:"left"},{label:m("company.all-name"),prop:"companyFullName",width:"auto"},{label:m("company.enName"),prop:"companyEnName",width:"auto"},{label:m("company.contact"),prop:"contactPerson",width:"auto"},{label:m("company.email"),prop:"eMail",width:"auto"},{label:m("company.address"),prop:"address",width:"auto"},{label:m("company.note"),prop:"remark",width:"auto"},{label:m("company.disable"),prop:"disable",width:"auto"},{label:m("operate"),prop:"operate",width:"150",fixed:"right"}]})}}function De(){const m=P({pageSize:10,pageNum:1,companyShortName:null,companyFullName:null,disable:0}),a=P({list:[],total:0}),y=h(),v=()=>{m.pageNum=1,m.pageSize=10,m.disable=0},p=()=>{y.value&&(y.value.resetFields(),y.value.clearValidate());for(const s in m)Object.prototype.hasOwnProperty.call(m,s)&&(m[s]=void 0);v(),b()},b=async()=>{const{rows:s,total:S}=await ke(m);a.list=s,a.total=S};return{formData:m,loadData:b,searchFormRef:y,resetData:p,tableData:a,reloadData:v}}function Se(){const{t:m}=A(),a=P({country:null,district:null,companyCode:null,companyShortName:null,companyFullName:null,companyEnName:null,contactPerson:null,contactNumber:null,eMail:null,companyHomepage:null,postCode:null,address:null,logoPath:null,backgroundPath:null,bankName:null,bankAccount:null,taxNo:null,remark:null,createId:null,createName:null,createTime:null,modifyId:null,modifyName:null,modifyTime:null,notDelete:null,notEdit:null}),y=h(),v=P({companyCode:j(m("company.code")+m("cannot_empty")),companyShortName:j(m("company.short-name")+m("cannot_empty")),companyFullName:j(m("company.all-name")+m("cannot_empty"))}),p=h(""),b=h(!1),s=h(!1),S=async()=>new Promise(async(g,V)=>{if(!y.value){V(!1);return}try{await y.value.validate(),a.id?await Ce(a):await Ne(a),R(),ce({type:"success",message:m("operate_success")}),g(!0)}catch(N){throw V(N),N}}),k=h(!1),d=async(g,V)=>{if(p.value=s.value?m("check_details"):g&&V?m("edit")+m("company.company_info"):m("add")+m("company.company_info"),b.value=!!(g&&V),H(),k.value=!0,V){const{data:N}=await we({id:V});for(let F in N)Object.prototype.hasOwnProperty.call(N,F)&&(a[F]=N[F])}},H=()=>{y.value&&(y.value.resetFields(),y.value.clearValidate());for(let g in a)a[g]=void 0},R=()=>{k.value=!1,s.value=!1,H()};return{updateFormData:a,updateFormRef:y,updateFormRules:v,submit:S,showHandle:k,openHandle:d,closeHandle:R,title:p,disabled:b,handleCheckDetail:g=>{s.value=!0,d(g,g.id)},isDetails:s}}const U=h([]),J=h();function Ue(m,a){async function y(p){const b=U.value.length>0&&U.value.every(d=>d.disable),s=!U.value.length&&p.disable,S=async()=>{await ve({id:p.id}),J.value="",U.value=[],a.$modal.msgSuccess(m("operate_success"))},k=d=>a.$modal.confirm(d).then(S);b?await k(m("delete_tip1")):U.value.length?await k(m("delete_tip2")):s?await k(m("delete_tip4")):await k(m("delete_tip3"))}function v({rowList:p}){U.value=p;const b=p.map(s=>s.id);J.value=b.join(",")}return{deleteHandler:y,select:v,idList:U}}const Fe={class:"app-container"},Pe={class:"my-header"},He=["id"],Re={class:"dialog-footer"},Me=Object.assign({name:"Company"},{__name:"index",setup(m){const{t:a}=A(),{proxy:y}=he(),{pageData:v}=xe(),{formData:p,tableData:b,loadData:s,searchFormRef:S,resetData:k}=De(),{updateFormData:d,updateFormRef:H,updateFormRules:R,submit:K,openHandle:g,showHandle:V,title:N,handleCheckDetail:F,isDetails:r,closeHandle:X}=Se(),{deleteHandler:Y,select:Z,idList:ee}=Ue(a,y),$=h(!0),le=h(""),z=h(!1),E=h(["1"]);re(()=>{s()});const ae=async()=>{try{await K(),setTimeout(()=>{s()},50)}catch(x){throw x}},oe=async x=>{await Y(x),setTimeout(()=>{s()},50)};function te(){y.download("bok/company/export",{...p},`company_${new Date().getTime()}.xlsx`)}const ne=()=>{z.value=!z.value,E.value=z.value?["1","2","3","4"]:["1"]};return(x,n)=>{const i=_("el-input"),c=_("el-form-item"),u=_("el-col"),de=_("el-checkbox"),C=_("el-button"),f=_("el-row"),W=_("el-form"),O=_("el-tooltip"),me=_("el-tag"),I=_("el-collapse-item"),ue=_("el-collapse"),pe=_("el-dialog");return q(),ie("div",Fe,[ye(l(W,{model:e(p),ref_key:"searchFormRef",ref:S,inline:!0,labelSuffix:":"},{default:o(()=>[l(f,{gutter:20},{default:o(()=>[l(u,{lg:4,sm:12,md:12,xs:24},{default:o(()=>[l(c,{label:e(a)("company.short-name"),prop:"companyShortName"},{default:o(()=>[l(i,{modelValue:e(p).companyShortName,"onUpdate:modelValue":n[0]||(n[0]=t=>e(p).companyShortName=t),placeholder:e(a)("company.input")+e(a)("company.short-name"),clearable:"",onKeyup:L(e(s),["enter"])},null,8,["modelValue","placeholder","onKeyup"])]),_:1},8,["label"])]),_:1}),l(u,{lg:4,sm:12,md:12,xs:24},{default:o(()=>[l(c,{label:e(a)("company.all-name"),prop:"companyFullName"},{default:o(()=>[l(i,{modelValue:e(p).companyFullName,"onUpdate:modelValue":n[1]||(n[1]=t=>e(p).companyFullName=t),placeholder:e(a)("company.input")+e(a)("company.all-name"),clearable:"",onKeyup:L(e(s),["enter"])},null,8,["modelValue","placeholder","onKeyup"])]),_:1},8,["label"])]),_:1}),l(u,{lg:2,sm:12,md:12,xs:24},{default:o(()=>[l(c,{label:"",prop:"delFlag"},{default:o(()=>[l(de,{modelValue:e(p).disable,"onUpdate:modelValue":n[2]||(n[2]=t=>e(p).disable=t),onChange:e(s),"true-label":1,"false-label":0,label:e(a)("include_disable"),size:"large"},null,8,["modelValue","onChange","label"])]),_:1})]),_:1}),l(u,{lg:4,sm:12,md:12,xs:24},{default:o(()=>[l(c,null,{default:o(()=>[l(C,{type:"primary",icon:"Search",onClick:e(s)},{default:o(()=>[D(w(e(a)("query")),1)]),_:1},8,["onClick"]),l(C,{icon:"Refresh",onClick:e(k)},{default:o(()=>[D(w(e(a)("reset")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),[[fe,e($)]]),l(f,{gutter:10,class:"mb10 mt10"},{default:o(()=>[l(u,{span:1.5},{default:o(()=>[l(C,{type:"primary",plain:"",icon:"Plus",onClick:e(g)},{default:o(()=>[D(w(e(a)("add")),1)]),_:1},8,["onClick"])]),_:1}),l(u,{span:1.5},{default:o(()=>[l(C,{type:"warning",plain:"",icon:"Download",onClick:te,class:"btn-export"},{default:o(()=>[D(w(e(a)("import")),1)]),_:1})]),_:1})]),_:1}),l(Ve,{loading:e(Q)().loading,onSelect:e(Z),ref_key:"tableRef",ref:le,onQueryTable:e(s),showSearch:e($),"onUpdate:showSearch":n[3]||(n[3]=t=>B($)?$.value=t:null),"table-key":"companyId",onHandleCurrentChange:e(s),total:e(b).total,showMultipleColumn:"",pageSize:e(p).pageSize,"onUpdate:pageSize":n[4]||(n[4]=t=>e(p).pageSize=t),pageNum:e(p).pageNum,"onUpdate:pageNum":n[5]||(n[5]=t=>e(p).pageNum=t),operateWidth:"100px",tableData:e(b).list,columnData:e(v).columnData,showSummary:!1,showOperate:!1,"show-multiple":!1,"show-multiple-column":!0,showPagination:!0},{operateDefault:o(({data:{row:t}})=>[l(O,{class:"box-item",effect:"dark",content:e(a)("check_details"),placement:"top-start"},{default:o(()=>[l(C,{link:"",type:"primary",icon:"View",onClick:M=>e(F)(t)},null,8,["onClick"])]),_:2},1032,["content"]),l(O,{class:"box-item",effect:"dark",content:e(a)("edit"),placement:"top-start"},{default:o(()=>[l(C,{link:"",type:"primary",icon:"Edit",onClick:M=>e(g)(t,t.id)},null,8,["onClick"])]),_:2},1032,["content"]),l(O,{class:"box-item",effect:"dark",content:e(a)("delete"),placement:"top-start"},{default:o(()=>[l(C,{link:"",type:"primary",icon:"Delete",disabled:!!e(ee).length,onClick:M=>oe(t)},null,8,["disabled","onClick"])]),_:2},1032,["content"])]),disableDefault:o(({data:{row:t}})=>[l(me,{type:t.disable?"info":"success"},{default:o(()=>[D(w(t.disable?e(a)("disabled"):e(a)("normal")),1)]),_:2},1032,["type"])]),_:1},8,["loading","onSelect","onQueryTable","showSearch","onHandleCurrentChange","total","pageSize","pageNum","tableData","columnData"]),l(pe,{title:e(N),modelValue:e(V),"onUpdate:modelValue":n[25]||(n[25]=t=>B(V)?V.value=t:null),width:"40%","append-to-body":"",draggable:""},{header:o(({close:t,titleId:M,titleClass:se})=>[T("div",Pe,[T("div",{id:M,class:be(se)},w(e(N)),11,He),T("div",null,[l(C,{class:"mr20",onClick:ne},{default:o(()=>[D(w(e(z)?e(a)("company.complete"):e(a)("company.contracted")),1)]),_:1})])])]),footer:o(()=>[T("div",Re,[e(r)?_e("",!0):(q(),ge(C,{key:0,type:"primary",class:"btn-confirm",loading:e(Q)().loading,onClick:ae},{default:o(()=>[D(w(x.$t("confirm")),1)]),_:1},8,["loading"])),l(C,{class:"btn-cancel",onClick:e(X)},{default:o(()=>[D(w(e(r)?e(a)("close"):e(a)("cancel")),1)]),_:1},8,["onClick"])])]),default:o(()=>[l(W,{ref_key:"updateFormRef",ref:H,"label-position":"left",model:e(d),rules:e(R),"label-suffix":"ï¼š"},{default:o(()=>[l(ue,{modelValue:e(E),"onUpdate:modelValue":n[24]||(n[24]=t=>B(E)?E.value=t:null)},{default:o(()=>[l(I,{title:e(a)("company.main"),name:"1"},{default:o(()=>[l(f,{gutter:20},{default:o(()=>[l(u,{lg:12,sm:12,md:12,xs:24},{default:o(()=>[l(c,{label:e(a)("company.code"),prop:"companyCode"},{default:o(()=>[l(i,{modelValue:e(d).companyCode,"onUpdate:modelValue":n[6]||(n[6]=t=>e(d).companyCode=t),disabled:e(r),placeholder:e(a)("company.input")+e(a)("company.code")},null,8,["modelValue","disabled","placeholder"])]),_:1},8,["label"])]),_:1}),l(u,{lg:12,sm:12,md:12,xs:24},{default:o(()=>[l(c,{label:e(a)("company.short-name"),prop:"companyShortName"},{default:o(()=>[l(i,{modelValue:e(d).companyShortName,"onUpdate:modelValue":n[7]||(n[7]=t=>e(d).companyShortName=t),disabled:e(r),placeholder:e(a)("company.input")+e(a)("company.short-name")},null,8,["modelValue","disabled","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1}),l(f,{gutter:20},{default:o(()=>[l(u,{lg:12,sm:12,md:12,xs:24},{default:o(()=>[l(c,{label:e(a)("company.all-name"),prop:"companyFullName"},{default:o(()=>[l(i,{modelValue:e(d).companyFullName,"onUpdate:modelValue":n[8]||(n[8]=t=>e(d).companyFullName=t),disabled:e(r),placeholder:e(a)("company.input")+e(a)("company.all-name")},null,8,["modelValue","disabled","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["title"]),l(I,{title:e(a)("company.secondary"),name:"2"},{default:o(()=>[l(f,{gutter:20},{default:o(()=>[l(u,{lg:12,sm:12,md:12,xs:24},{default:o(()=>[l(c,{label:e(a)("company.enName"),prop:"companyEnName"},{default:o(()=>[l(i,{modelValue:e(d).companyEnName,"onUpdate:modelValue":n[9]||(n[9]=t=>e(d).companyEnName=t),disabled:e(r),placeholder:e(a)("company.input")+e(a)("company.enName")},null,8,["modelValue","disabled","placeholder"])]),_:1},8,["label"])]),_:1}),l(u,{lg:12,sm:12,md:12,xs:24},{default:o(()=>[l(c,{label:e(a)("company.home"),prop:"companyHomepage"},{default:o(()=>[l(i,{modelValue:e(d).companyHomepage,"onUpdate:modelValue":n[10]||(n[10]=t=>e(d).companyHomepage=t),disabled:e(r),placeholder:e(a)("company.input")+e(a)("company.home")},null,8,["modelValue","disabled","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1}),l(f,{gutter:20},{default:o(()=>[l(u,{lg:12,sm:12,md:12,xs:24},{default:o(()=>[l(c,{label:e(a)("company.country"),prop:"country"},{default:o(()=>[l(i,{modelValue:e(d).country,"onUpdate:modelValue":n[11]||(n[11]=t=>e(d).country=t),disabled:e(r),placeholder:e(a)("company.input")+e(a)("company.country")},null,8,["modelValue","disabled","placeholder"])]),_:1},8,["label"])]),_:1}),l(u,{lg:12,sm:12,md:12,xs:24},{default:o(()=>[l(c,{label:e(a)("company.region"),prop:"district"},{default:o(()=>[l(i,{modelValue:e(d).district,"onUpdate:modelValue":n[12]||(n[12]=t=>e(d).district=t),disabled:e(r),placeholder:e(a)("company.input")+e(a)("company.region")},null,8,["modelValue","disabled","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1}),l(f,{gutter:20},{default:o(()=>[l(u,{lg:12,sm:12,md:12,xs:24},{default:o(()=>[l(c,{label:e(a)("company.bank_name"),prop:"bankName"},{default:o(()=>[l(i,{modelValue:e(d).bankName,"onUpdate:modelValue":n[13]||(n[13]=t=>e(d).bankName=t),disabled:e(r),placeholder:e(a)("company.input")+e(a)("company.bank_name")},null,8,["modelValue","disabled","placeholder"])]),_:1},8,["label"])]),_:1}),l(u,{lg:12,sm:12,md:12,xs:24},{default:o(()=>[l(c,{label:e(a)("company.bank_account"),prop:"bankAccount"},{default:o(()=>[l(i,{modelValue:e(d).bankAccount,"onUpdate:modelValue":n[14]||(n[14]=t=>e(d).bankAccount=t),disabled:e(r),placeholder:e(a)("company.input")+e(a)("company.bank_account")},null,8,["modelValue","disabled","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1}),l(f,null,{default:o(()=>[l(u,{lg:12,sm:12,md:12,xs:24},{default:o(()=>[l(c,{label:e(a)("company.duty_paragraph"),prop:"taxNo"},{default:o(()=>[l(i,{modelValue:e(d).taxNo,"onUpdate:modelValue":n[15]||(n[15]=t=>e(d).taxNo=t),disabled:e(r),placeholder:e(a)("company.input")+e(a)("company.duty_paragraph")},null,8,["modelValue","disabled","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["title"]),l(I,{title:e(a)("company.contact"),name:"3"},{default:o(()=>[l(f,{gutter:20},{default:o(()=>[l(u,{lg:12,sm:12,md:12,xs:24},{default:o(()=>[l(c,{label:e(a)("company.contact"),prop:"contactPerson"},{default:o(()=>[l(i,{modelValue:e(d).contactPerson,"onUpdate:modelValue":n[16]||(n[16]=t=>e(d).contactPerson=t),disabled:e(r),placeholder:e(a)("company.input")+e(a)("company.contact")},null,8,["modelValue","disabled","placeholder"])]),_:1},8,["label"])]),_:1}),l(u,{lg:12,sm:12,md:12,xs:24},{default:o(()=>[l(c,{label:e(a)("company.contactWay"),prop:"contactNumber"},{default:o(()=>[l(i,{modelValue:e(d).contactNumber,"onUpdate:modelValue":n[17]||(n[17]=t=>e(d).contactNumber=t),disabled:e(r),placeholder:e(a)("company.input")+e(a)("company.contactWay")},null,8,["modelValue","disabled","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1}),l(f,{gutter:20},{default:o(()=>[l(u,{lg:12,sm:12,md:12,xs:24},{default:o(()=>[l(c,{label:e(a)("company.email"),prop:"eMail"},{default:o(()=>[l(i,{modelValue:e(d).eMail,"onUpdate:modelValue":n[18]||(n[18]=t=>e(d).eMail=t),disabled:e(r),placeholder:e(a)("company.input")+e(a)("company.email")},null,8,["modelValue","disabled","placeholder"])]),_:1},8,["label"])]),_:1}),l(u,{lg:12,sm:12,md:12,xs:24},{default:o(()=>[l(c,{label:e(a)("company.postalCode"),prop:"postCode"},{default:o(()=>[l(i,{modelValue:e(d).postCode,"onUpdate:modelValue":n[19]||(n[19]=t=>e(d).postCode=t),disabled:e(r),placeholder:e(a)("company.input")+e(a)("company.postalCode")},null,8,["modelValue","disabled","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1}),l(f,{gutter:20},{default:o(()=>[l(u,{lg:12,sm:12,md:12,xs:24},{default:o(()=>[l(c,{label:e(a)("company.address"),prop:"address"},{default:o(()=>[l(i,{modelValue:e(d).address,"onUpdate:modelValue":n[20]||(n[20]=t=>e(d).address=t),disabled:e(r),placeholder:e(a)("company.input")+e(a)("company.address")},null,8,["modelValue","disabled","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["title"]),l(I,{title:e(a)("company.other"),name:"4"},{default:o(()=>[l(f,{gutter:20},{default:o(()=>[l(u,{lg:15,sm:12,md:12,xs:24},{default:o(()=>[l(c,{label:e(a)("company.logo"),prop:"logoPath","label-width":"120"},{default:o(()=>[l(G,{modelValue:e(d).logoPath,"onUpdate:modelValue":n[21]||(n[21]=t=>e(d).logoPath=t),disabled:e(r),limit:1},null,8,["modelValue","disabled"])]),_:1},8,["label"])]),_:1})]),_:1}),l(f,{gutter:20},{default:o(()=>[l(u,{lg:15,sm:12,md:12,xs:24},{default:o(()=>[l(c,{label:e(a)("company.bgImg"),prop:"backgroundPath","label-width":"120"},{default:o(()=>[l(G,{modelValue:e(d).backgroundPath,"onUpdate:modelValue":n[22]||(n[22]=t=>e(d).backgroundPath=t),disabled:e(r),limit:1},null,8,["modelValue","disabled"])]),_:1},8,["label"])]),_:1})]),_:1}),l(f,{gutter:20},{default:o(()=>[l(u,{lg:12,sm:12,md:12,xs:24},{default:o(()=>[l(c,{label:x.$t("company.note"),prop:"remark"},{default:o(()=>[l(i,{modelValue:e(d).remark,"onUpdate:modelValue":n[23]||(n[23]=t=>e(d).remark=t),type:"textarea",clearable:"",disabled:e(r),placeholder:`${x.$t("input")}${x.$t("company.note")} `},null,8,["modelValue","disabled","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}});export{Me as default};
