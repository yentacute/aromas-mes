import{V as v,r as f,e as ee,N as le,h as r,K as oe,o as z,c as te,L as S,M as B,k as l,i as e,j as t,p as ae,x as g,I as E,s as ne,n as ue,$ as re,H as ce,z as de}from"./index-BP30Yz_m.js";function ie(c){return v({url:"/bok/colorMatch/list",method:"get",params:c})}function se(c){return v({url:"/bok/colorMatch/"+c,method:"get"})}function pe(c){return v({url:"/bok/colorMatch",method:"post",data:c})}function me(c){return v({url:"/bok/colorMatch",method:"put",data:c})}function fe(c){return v({url:"/bok/colorMatch/"+c,method:"delete"})}const he={class:"app-container"},_e={class:"dialog-footer"},ge=ce({name:"ColorMatch"}),ve=Object.assign(ge,{setup(c){const{proxy:h}=de(),x=f([]),_=f(!1),V=f(!0),y=f(!0),N=f([]),U=f(!0),I=f(!0),k=f(0),M=f(""),F=ee({form:{},queryParams:{pageNum:1,pageSize:10,productionDocumentNum:null},rules:{}}),{queryParams:d,form:n,rules:K}=le(F);function b(){V.value=!0,ie(d.value).then(u=>{x.value=u.rows,k.value=u.total,V.value=!1})}function P(){_.value=!1,D()}function D(){n.value={colorMatchId:null,productionDocumentNum:null,styleNum:null,styleColour:null,clothNum:null,clothColour:null,part:null,partDescribe:null,createUserId:null,createTime:null,updateUserId:null,updateTime:null,delFlag:null},h.resetForm("colorMatchRef")}function w(){d.value.pageNum=1,b()}function L(){h.resetForm("queryRef"),w()}function Q(u){N.value=u.map(o=>o.colorMatchId),U.value=u.length!=1,I.value=!u.length}function j(){D(),_.value=!0,M.value="添加配色"}function $(u){D();const o=u.colorMatchId||N.value;se(o).then(i=>{n.value=i.data,_.value=!0,M.value="修改配色"})}function A(){h.$refs.colorMatchRef.validate(u=>{u&&(n.value.colorMatchId!=null?me(n.value).then(o=>{h.$modal.msgSuccess("修改成功"),_.value=!1,b()}):pe(n.value).then(o=>{h.$modal.msgSuccess("新增成功"),_.value=!1,b()}))})}function R(u){const o=u.colorMatchId||N.value;h.$modal.confirm('是否确认删除配色编号为"'+o+'"的数据项？').then(function(){return fe(o)}).then(()=>{b(),h.$modal.msgSuccess("删除成功")}).catch(()=>{})}function H(){h.download("bok/colorMatch/export",{...d.value},`colorMatch_${new Date().getTime()}.xlsx`)}return b(),(u,o)=>{const i=r("el-input"),p=r("el-form-item"),s=r("el-button"),T=r("el-form"),C=r("el-col"),O=r("right-toolbar"),G=r("el-row"),m=r("el-table-column"),q=r("el-tooltip"),J=r("el-table"),W=r("pagination"),X=r("el-dialog"),Y=oe("loading");return z(),te("div",he,[S(e(T,{model:l(d),ref:"queryRef",inline:!0},{default:t(()=>[e(p,{label:"生产制单号",prop:"productionDocumentNum"},{default:t(()=>[e(i,{modelValue:l(d).productionDocumentNum,"onUpdate:modelValue":o[0]||(o[0]=a=>l(d).productionDocumentNum=a),placeholder:"请输入生产制单号",clearable:"",onKeyup:ae(w,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(p,null,{default:t(()=>[e(s,{type:"primary",icon:"Search",onClick:w},{default:t(()=>[g("搜索")]),_:1}),e(s,{icon:"Refresh",onClick:L},{default:t(()=>[g("重置")]),_:1})]),_:1})]),_:1},8,["model"]),[[B,l(y)]]),e(G,{gutter:10,class:"mb8"},{default:t(()=>[e(C,{span:1.5},{default:t(()=>[e(s,{type:"primary",plain:"",icon:"Plus",onClick:j},{default:t(()=>[g("新增")]),_:1})]),_:1}),e(C,{span:1.5},{default:t(()=>[e(s,{type:"success",plain:"",icon:"Edit",disabled:l(U),onClick:$},{default:t(()=>[g("修改")]),_:1},8,["disabled"])]),_:1}),e(C,{span:1.5},{default:t(()=>[e(s,{type:"danger",plain:"",icon:"Delete",disabled:l(I),onClick:R},{default:t(()=>[g("删除")]),_:1},8,["disabled"])]),_:1}),e(C,{span:1.5},{default:t(()=>[e(s,{type:"warning",plain:"",icon:"Download",onClick:H,class:"btn-export"},{default:t(()=>[g("导出")]),_:1})]),_:1}),e(O,{showSearch:l(y),"onUpdate:showSearch":o[1]||(o[1]=a=>E(y)?y.value=a:null),onQueryTable:b},null,8,["showSearch"])]),_:1}),S((z(),ne(J,{data:l(x),onSelectionChange:Q,border:""},{default:t(()=>[e(m,{type:"selection",width:"55",align:"center"}),e(m,{label:"生产制单号",align:"center",prop:"productionDocumentNum"}),e(m,{label:"款号",align:"center",prop:"styleNum"}),e(m,{label:"款号颜色",align:"center",prop:"styleColour"}),e(m,{label:"布料编号",align:"center",prop:"clothNum"}),e(m,{label:"布料颜色",align:"center",prop:"clothColour"}),e(m,{label:"部位",align:"center",prop:"part"}),e(m,{label:"部位描述",align:"center",prop:"partDescribe"}),e(m,{label:"操作",align:"center","class-name":"small-padding fixed-width",fixed:"right"},{default:t(({row:a})=>[e(q,{class:"box-item",effect:"dark",content:u.$t("edit"),placement:"top-start"},{default:t(()=>[e(s,{link:"",type:"primary",icon:"Edit",onClick:Z=>$(a)},null,8,["onClick"])]),_:2},1032,["content"]),e(q,{class:"box-item",effect:"dark",content:u.$t("delete"),placement:"top-start"},{default:t(()=>[e(s,{link:"",type:"primary",icon:"Delete",onClick:Z=>R(a)},null,8,["onClick"])]),_:2},1032,["content"])]),_:1})]),_:1},8,["data"])),[[Y,l(V)]]),S(e(W,{total:l(k),page:l(d).pageNum,"onUpdate:page":o[2]||(o[2]=a=>l(d).pageNum=a),limit:l(d).pageSize,"onUpdate:limit":o[3]||(o[3]=a=>l(d).pageSize=a),onPagination:b},null,8,["total","page","limit"]),[[B,l(k)>0]]),e(X,{title:l(M),modelValue:l(_),"onUpdate:modelValue":o[11]||(o[11]=a=>E(_)?_.value=a:null),width:"500px","append-to-body":""},{footer:t(()=>[ue("div",_e,[e(s,{type:"primary",loading:l(re)().loading,onClick:A},{default:t(()=>[g("确 定")]),_:1},8,["loading"]),e(s,{onClick:P,class:"btn-cancel"},{default:t(()=>[g("取 消")]),_:1})])]),default:t(()=>[e(T,{ref:"colorMatchRef",model:l(n),rules:l(K),"label-width":"80px"},{default:t(()=>[e(p,{label:"生产制单号",prop:"productionDocumentNum"},{default:t(()=>[e(i,{modelValue:l(n).productionDocumentNum,"onUpdate:modelValue":o[4]||(o[4]=a=>l(n).productionDocumentNum=a),placeholder:"请输入生产制单号"},null,8,["modelValue"])]),_:1}),e(p,{label:"款号",prop:"styleNum"},{default:t(()=>[e(i,{modelValue:l(n).styleNum,"onUpdate:modelValue":o[5]||(o[5]=a=>l(n).styleNum=a),placeholder:"请输入款号"},null,8,["modelValue"])]),_:1}),e(p,{label:"款号颜色",prop:"styleColour"},{default:t(()=>[e(i,{modelValue:l(n).styleColour,"onUpdate:modelValue":o[6]||(o[6]=a=>l(n).styleColour=a),placeholder:"请输入款号颜色"},null,8,["modelValue"])]),_:1}),e(p,{label:"布料编号",prop:"clothNum"},{default:t(()=>[e(i,{modelValue:l(n).clothNum,"onUpdate:modelValue":o[7]||(o[7]=a=>l(n).clothNum=a),placeholder:"请输入布料编号"},null,8,["modelValue"])]),_:1}),e(p,{label:"布料颜色",prop:"clothColour"},{default:t(()=>[e(i,{modelValue:l(n).clothColour,"onUpdate:modelValue":o[8]||(o[8]=a=>l(n).clothColour=a),placeholder:"请输入布料颜色"},null,8,["modelValue"])]),_:1}),e(p,{label:"部位",prop:"part"},{default:t(()=>[e(i,{modelValue:l(n).part,"onUpdate:modelValue":o[9]||(o[9]=a=>l(n).part=a),placeholder:"请输入部位"},null,8,["modelValue"])]),_:1}),e(p,{label:"部位描述",prop:"partDescribe"},{default:t(()=>[e(i,{modelValue:l(n).partDescribe,"onUpdate:modelValue":o[10]||(o[10]=a=>l(n).partDescribe=a),placeholder:"请输入部位描述"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}});export{ve as default};
