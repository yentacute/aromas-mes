import{b as Z,e as E,V as K,r as g,W as De,h as u,o as F,c as Q,q as ue,s as Y,j as a,X as q,x as y,t as C,F as pe,Y as me,v as ie,_ as we,D as fe,K as Ve,i as l,n as T,L as re,k as e,M as se,I as X,J as xe,f as Ne,p as be,Z as Le,$ as _e,z as Se}from"./index-BP30Yz_m.js";import{C as $e}from"./index-DTWQQqpJ.js";import{r as Ce}from"./verify-D2E6NcQX.js";import{_ as Ue}from"./index-CnOC-ydz.js";/* empty css                                                              */function Te(){const{t}=Z();return{pageData:E({columnData:[{label:t("colorLibrary.colorCode"),prop:"colorCode",width:"auto",fixed:"left"},{label:t("colorLibrary.colorName"),prop:"colorName",width:"auto",fixed:"left"},{label:t("colorLibrary.16Color"),prop:"sixteenDigitColor",width:"180"},{label:t("remark"),prop:"remark",width:"auto"},{label:t("is_disable"),prop:"disable",width:"auto"},{label:t("operate"),prop:"operate",width:"auto",fixed:"right"}],matchColumnData:[{label:t("colorLibrary.colorCode")+"("+t("required")+")",prop:"colorCode",width:"auto",fixed:"left",isRequired:!0},{label:t("colorLibrary.colorName")+"("+t("required")+")",prop:"colorName",width:"auto",fixed:"left",isRequired:!0},{label:t("colorLibrary.16Color"),prop:"sixteenDigitColor",width:"180"},{label:t("remark"),prop:"remark",width:"auto"}]})}}function Fe(t){return K({url:"/bok/accessoriesColor/getList",method:"get",params:t})}function Re(t){return K({url:"/bok/accessoriesColor/getColorById",method:"get",params:t})}function ye(t){return K({url:"/bok/accessoriesColor/add",method:"post",data:t})}function Be(t){return K({url:"/bok/accessoriesColor/updateColor",method:"post",data:t})}function He(t){return K({url:"/bok/accessoriesColor/delColor",method:"post",data:t})}const ze=t=>K({url:"/bok/accessoriesColor/importData",method:"post",data:t});function Ie(){const t=E({pageSize:10,pageNum:1,colorCode:null,colorName:null,disable:0}),o=E({list:[],total:0}),c=g(),f=()=>{t.pageNum=1,t.pageSize=10,t.disable=0},r=()=>{c.value&&(c.value.resetFields(),c.value.clearValidate());for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(t[i]=void 0);f(),p()},p=async()=>{const{rows:i,total:w}=await Fe(t);o.list=i,o.total=w};return{formData:t,loadData:p,searchFormRef:c,resetData:r,tableData:o,reloadData:f}}function Pe(){const{t}=Z(),o=E({colorCode:null,colorName:null,sixteenDigitColor:null,remark:null}),c=g(),f=E({colorCode:Ce(t("colorLibrary.colorCode")+t("cannot_empty")),colorName:Ce(t("colorLibrary.colorName")+t("cannot_empty"))}),r=g(""),p=g(!1),i=g([]),w=async()=>new Promise(async(b,x)=>{if(!c.value){x(!1);return}try{await c.value.validate(),o.id?await Be(o):(i.value.push(o),await ye(i.value)),L(),De({type:"success",message:t("operate_success")}),b(!0)}catch(S){throw x(S),S}}),h=g(!1),d=g(!1),k=async(b,x)=>{if(r.value=d.value?t("check_details"):b&&x?t("edit")+t("colorLibrary.accessory_color"):t("add")+t("colorLibrary.accessory_color"),p.value=!!(b&&x),D(),h.value=!0,x){const{data:S}=await Re({id:x});for(let m in S)Object.prototype.hasOwnProperty.call(S,m)&&(o[m]=S[m])}},D=()=>{c.value&&(c.value.resetFields(),c.value.clearValidate());for(let b in o)o[b]=void 0},L=()=>{h.value=!1,d.value=!1,D(),i.value=[]};return{updateFormData:o,updateFormRef:c,updateFormRules:f,submit:w,showHandle:h,openHandle:k,closeHandle:L,title:r,disabled:p,handleCheckDetail:b=>{d.value=!0,k(b,b.id)},colorList:i,isDetails:d}}const I=g([]),ne=g();function Ae(t,o){async function c(r){r.id||ne.value;const p=I.value.length>0&&I.value.every(d=>d.disable),i=!I.value.length&&r.disable,w=async()=>{await He({id:r.id}),ne.value="",I.value=[],o.$modal.msgSuccess(t("operate_success"))},h=d=>o.$modal.confirm(d).then(w);p?await h(t("delete_tip1")):I.value.length?await h(t("delete_tip2")):i?await h(t("delete_tip4")):await h(t("delete_tip3"))}function f({rowList:r}){I.value=r;const p=r.map(i=>i.id);ne.value=p.join(",")}return{deleteHandler:c,select:f,idList:I}}const Oe=Object.assign({inheritAttrs:!0,customOptions:{name:"HeaderTable"}},{__name:"index",props:{isChildren:{type:Boolean,default:!1},columnData:{type:Array,default:()=>[]}},setup(t){return(o,c)=>{const f=u("el-table-column");return F(!0),Q(pe,null,ue(t.columnData,(r,p)=>(F(),Y(f,me(r,{key:p,align:"center",resizable:""}),{header:a(()=>[q(o.$slots,"propHeader",{data:r},()=>[y(C(r.label),1)])]),default:a(({row:i,column:w,$index:h})=>{var d;return[q(o.$slots,"propDefault",{data:{row:i,column:w,$index:h,prop:r.prop}},()=>[y(C(i[r.prop]),1)]),r.children&&((d=r.children)!=null&&d.length)?(F(!0),Q(pe,{key:0},ue(r.children,(k,D)=>(F(),Y(f,me(k,{key:D}),{header:a(()=>[q(o.$slots,"propHeader",{data:k},()=>[y(C(k.label),1)])]),default:a(({row:L,column:B,$index:b})=>[q(o.$slots,"propDefault",{data:{row:L,column:B,$index:b,prop:k.prop,value:L[k.prop]}},()=>[y(C(L[k.prop]),1)])]),_:2},1040))),128)):ie("",!0)]}),_:2},1040))),128)}}}),qe={class:"table"},Ee={key:0},Ke={class:"h-box justify-between"},Me={class:"h-box justify-between w-100"},Qe={class:"dialog-footer"},We={__name:"index",props:{modelValue:Boolean,title:String,width:String,columnData:{type:Array,default:()=>[]},cancelText:{type:String,default:void 0},confirmText:{type:String,default:void 0},showCancel:{type:Boolean,default:!0},showConfirm:{type:Boolean,default:!0},showLeftFooter:{type:Boolean,default:!0}},emits:["update:modelValue","confirmCallback","cancelCallback"],setup(t,{emit:o}){const{t:c}=Z(),f=t,r=g(!1),p=o;let i=fe(()=>f.modelValue);function w(){p("update:modelValue",!1),p("cancelCallback"),D.value=[]}const h=fe(()=>m=>D.value[m].isEdit),d=g(""),k=g(),D=g([]),L=(m,v,$,W)=>{d.value=v.property,m.isEdit=!0,xe(()=>{k.value.focus()})},B=m=>{m.isEdit=!1},b=()=>{const m={};f.columnData.forEach(v=>{v.prop&&(m[v.prop]="")});for(let v=0;v<100;v++)D.value.push({...m,rowKey:v+1})},x=()=>{b()},S=()=>{r.value=!0,p("update:modelValue",!1),p("confirmCallback",D.value),D.value=[],r.value=!1};return(m,v)=>{const $=u("Plus"),W=u("el-icon"),M=u("el-button"),j=u("el-row"),P=u("el-table-column"),G=u("el-input"),ee=u("el-table"),le=u("el-dialog"),oe=Ve("loading");return F(),Q("div",null,[l(le,{"destroy-on-close":"",onClose:w,onOpen:x,modelValue:e(i),"onUpdate:modelValue":v[0]||(v[0]=_=>X(i)?i.value=_:i=_),title:f.title,width:t.width,"align-center":"",draggable:"","close-on-click-modal":!1},{footer:a(()=>[T("div",Ke,[T("div",Me,[T("div",null,[T("span",Qe,[re(l(M,{onClick:w,class:"btn-cancel"},{default:a(()=>[y(C(f.cancelText||e(c)("cancel")),1)]),_:1},512),[[se,t.showCancel]]),re((F(),Y(M,{disabled:r.value,class:"btn-confirm",type:"primary",onClick:S},{default:a(()=>[y(C(f.confirmText||e(c)("confirm")),1)]),_:1},8,["disabled"])),[[se,t.showConfirm],[oe,r.value]])])])])])]),default:a(()=>[l(j,{class:"mb10"},{default:a(()=>[l(M,{onClick:b},{default:a(()=>[l(W,null,{default:a(()=>[l($)]),_:1}),y(" 100 "+C(e(c)("item")),1)]),_:1})]),_:1}),l(j,null,{default:a(()=>[T("div",qe,[l(ee,{data:D.value,border:!0,onCellDblclick:L,"max-height":"500"},{default:a(()=>[l(P,{type:"index",label:e(c)("serial_number"),width:"55",align:"center",fixed:"left"},null,8,["label"]),l(Oe,{columnData:t.columnData},{propHeader:a(_=>{var H;return[q(m.$slots,`${(H=_.data)==null?void 0:H.prop}Header`,{data:_.data},()=>[y(C(_.data.label),1)],!0)]}),propDefault:a(_=>[q(m.$slots,`${_.data.prop}Default`,{data:_.data},()=>[h.value(_.data.$index)&&_.data.prop===d.value?(F(),Q("span",Ee,[l(G,{type:"text",modelValue:_.data.row[_.data.prop],"onUpdate:modelValue":H=>_.data.row[_.data.prop]=H,ref_key:"inputRef",ref:k,onBlur:H=>B(_.data.row)},null,8,["modelValue","onUpdate:modelValue","onBlur"])])):ie("",!0)],!0)]),_:3},8,["columnData"])]),_:3},8,["data"])])]),_:3})]),_:3},8,["modelValue","title","width"])])}}},Je=we(We,[["__scopeId","data-v-b00650bd"]]),Xe={class:"app-container"},Ye={style:{display:"flex","justify-content":"space-between",width:"100%",height:"100%"}},Ze={class:"dialog-footer"},al=Object.assign({name:"AccessoriesColor"},{__name:"index",setup(t){const{t:o}=Z(),{proxy:c}=Se(),{pageData:f}=Te(),{formData:r,tableData:p,loadData:i,searchFormRef:w,resetData:h}=Ie(),{updateFormData:d,updateFormRef:k,updateFormRules:D,submit:L,openHandle:B,showHandle:b,title:x,handleCheckDetail:S,colorList:m,closeHandle:v,isDetails:$}=Pe(),{deleteHandler:W,select:M,idList:j}=Ae(o,c),P=g(!0),G=g("");Ne(()=>{i()});const ee=async()=>{try{await L(),setTimeout(()=>{i()},50)}catch(U){throw U}},le=async U=>{await W(U),setTimeout(()=>{i()},50)};function oe(){c.download("/bok/accessoriesColor/importTemplate",{...r},`accessoriesColor_${new Date().getTime()}.xlsx`)}function _(){A.title=o("import")+o("colorLibrary.accessory_color"),A.open=!0}const H=()=>{i(),A.open=!1},A=E({open:!1,title:""}),J=g(!1),ge=async U=>{m.value=U.filter(s=>s.colorCode!==""&&s.colorName!=="").map(s=>({colorCode:s.colorCode,colorName:s.colorName,sixteenDigitColor:s.sixteenDigitColor,remark:s.remark})),m.value.length&&(await ye(m.value),setTimeout(()=>{i()},50))};return(U,s)=>{const z=u("el-input"),R=u("el-form-item"),V=u("el-col"),he=u("el-checkbox"),N=u("el-button"),ae=u("el-row"),de=u("el-form"),te=u("el-tooltip"),ke=u("el-tag"),ce=u("el-color-picker"),ve=u("el-dialog");return F(),Q("div",Xe,[re(l(de,{model:e(r),ref_key:"searchFormRef",ref:w,inline:!0,labelSuffix:":"},{default:a(()=>[l(ae,{gutter:20},{default:a(()=>[l(V,{lg:5,sm:12,md:12,xs:24},{default:a(()=>[l(R,{label:e(o)("colorLibrary.colorCode"),prop:"colorCode"},{default:a(()=>[l(z,{modelValue:e(r).colorCode,"onUpdate:modelValue":s[0]||(s[0]=n=>e(r).colorCode=n),placeholder:e(o)("input")+e(o)("colorLibrary.colorCode"),clearable:"",onKeyup:be(e(i),["enter"])},null,8,["modelValue","placeholder","onKeyup"])]),_:1},8,["label"])]),_:1}),l(V,{lg:5,sm:12,md:12,xs:24},{default:a(()=>[l(R,{label:e(o)("colorLibrary.colorName"),prop:"colorName"},{default:a(()=>[l(z,{modelValue:e(r).colorName,"onUpdate:modelValue":s[1]||(s[1]=n=>e(r).colorName=n),placeholder:e(o)("input")+e(o)("colorLibrary.colorName"),clearable:"",onKeyup:be(e(i),["enter"])},null,8,["modelValue","placeholder","onKeyup"])]),_:1},8,["label"])]),_:1}),l(V,{lg:2,sm:12,md:12,xs:24},{default:a(()=>[l(R,{label:"",prop:"delFlag"},{default:a(()=>[l(he,{modelValue:e(r).disable,"onUpdate:modelValue":s[2]||(s[2]=n=>e(r).disable=n),onChange:e(i),"true-label":1,"false-label":0,label:e(o)("include_disable"),size:"large"},null,8,["modelValue","onChange","label"])]),_:1})]),_:1}),l(V,{lg:5,sm:12,md:12,xs:24},{default:a(()=>[l(R,null,{default:a(()=>[l(N,{type:"primary",icon:"Search",onClick:e(i)},{default:a(()=>[y(C(U.$t("query")),1)]),_:1},8,["onClick"]),l(N,{icon:"Refresh",onClick:e(h)},{default:a(()=>[y(C(U.$t("reset")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),[[se,e(P)]]),l(ae,{gutter:10,class:"mb10 mt10"},{default:a(()=>[l(V,{span:1.5},{default:a(()=>[l(N,{type:"primary",plain:"",icon:"Plus",onClick:e(B)},{default:a(()=>[y(C(U.$t("add")),1)]),_:1},8,["onClick"])]),_:1}),l(V,{span:1.5},{default:a(()=>[l(N,{type:"primary",plain:"",icon:"Plus",onClick:s[3]||(s[3]=n=>J.value=!0)},{default:a(()=>[y(C(e(o)("batch")+e(o)("add")),1)]),_:1})]),_:1}),l(V,{span:1.5},{default:a(()=>[l(N,{type:"info",plain:"",icon:"Upload",onClick:_},{default:a(()=>[y(C(e(o)("import")),1)]),_:1})]),_:1}),l(V,{span:1.5},{default:a(()=>[l(N,{type:"warning",plain:"",icon:"Download",onClick:oe},{default:a(()=>[y(C(e(o)("download_template")),1)]),_:1})]),_:1})]),_:1}),l($e,{loading:e(_e)().loading,onSelect:e(M),ref_key:"tableRef",ref:G,onQueryTable:e(i),showSearch:e(P),"onUpdate:showSearch":s[4]||(s[4]=n=>X(P)?P.value=n:null),"table-key":"accessoriesColorId",onHandleCurrentChange:e(i),total:e(p).total,showMultipleColumn:"",pageSize:e(r).pageSize,"onUpdate:pageSize":s[5]||(s[5]=n=>e(r).pageSize=n),pageNum:e(r).pageNum,"onUpdate:pageNum":s[6]||(s[6]=n=>e(r).pageNum=n),operateWidth:"100px",tableData:e(p).list,columnData:e(f).columnData,showSummary:!1,showOperate:!1,"show-multiple":!1,"show-multiple-column":!0,showPagination:!0},{sixteenDigitColorDefault:a(({data:{row:n}})=>[T("div",Ye,[T("div",{style:Le({width:"40%",color:"#000000FF",background:`${n.sixteenDigitColor}`})},null,4),T("div",null,C(n.sixteenDigitColor),1)])]),operateDefault:a(({data:{row:n}})=>[l(te,{class:"box-item",effect:"dark",content:e(o)("check_details"),placement:"top-start"},{default:a(()=>[l(N,{link:"",type:"primary",icon:"View",onClick:O=>e(S)(n)},null,8,["onClick"])]),_:2},1032,["content"]),l(te,{class:"box-item",effect:"dark",content:e(o)("edit"),placement:"top-start"},{default:a(()=>[l(N,{link:"",type:"primary",icon:"Edit",disabled:n.notEdit,onClick:O=>e(B)(n,n.id)},null,8,["disabled","onClick"])]),_:2},1032,["content"]),l(te,{class:"box-item",effect:"dark",content:e(o)("delete"),placement:"top-start"},{default:a(()=>[l(N,{link:"",type:"primary",icon:"Delete",disabled:n.notDelete,onClick:O=>le(n)},null,8,["disabled","onClick"])]),_:2},1032,["content"])]),disableDefault:a(({data:{row:n}})=>[l(ke,{type:n.disable?"info":"success"},{default:a(()=>[y(C(n.disable?e(o)("disable"):e(o)("normal")),1)]),_:2},1032,["type"])]),_:1},8,["loading","onSelect","onQueryTable","showSearch","onHandleCurrentChange","total","pageSize","pageNum","tableData","columnData"]),l(ve,{title:e(x),modelValue:e(b),"onUpdate:modelValue":s[12]||(s[12]=n=>X(b)?b.value=n:null),width:"500px","append-to-body":"",onClose:e(v)},{footer:a(()=>[T("div",Ze,[e($)?ie("",!0):(F(),Y(N,{key:0,type:"primary",class:"btn-confirm",loading:e(_e)().loading,onClick:ee},{default:a(()=>[y(C(e(o)("confirm")),1)]),_:1},8,["loading"])),l(N,{onClick:e(v),class:"btn-cancel"},{default:a(()=>[y(C(e($)?e(o)("close"):e(o)("cancel")),1)]),_:1},8,["onClick"])])]),default:a(()=>[l(de,{ref_key:"updateFormRef",ref:k,"label-position":"left",model:e(d),rules:e(D),"label-suffix":"："},{default:a(()=>[l(ae,{gutter:20},{default:a(()=>[l(V,{span:24},{default:a(()=>[l(R,{label:e(o)("colorLibrary.colorCode"),prop:"colorCode"},{default:a(()=>[l(z,{modelValue:e(d).colorCode,"onUpdate:modelValue":s[7]||(s[7]=n=>e(d).colorCode=n),disabled:e($),placeholder:e(o)("input")+e(o)("colorLibrary.colorCode")},null,8,["modelValue","disabled","placeholder"])]),_:1},8,["label"])]),_:1}),l(V,{span:24},{default:a(()=>[l(R,{label:e(o)("colorLibrary.colorName"),prop:"colorName"},{default:a(()=>[l(z,{modelValue:e(d).colorName,"onUpdate:modelValue":s[8]||(s[8]=n=>e(d).colorName=n),disabled:e($),placeholder:e(o)("input")+e(o)("colorLibrary.colorName")},null,8,["modelValue","disabled","placeholder"])]),_:1},8,["label"])]),_:1}),l(V,{span:24},{default:a(()=>[l(R,{label:e(o)("colorLibrary.16Color"),prop:"sixteenDigitColor"},{default:a(()=>[l(z,{modelValue:e(d).sixteenDigitColor,"onUpdate:modelValue":s[10]||(s[10]=n=>e(d).sixteenDigitColor=n),disabled:e($),placeholder:e(o)("set")+e(o)("colorLibrary.16Color")},{append:a(()=>[l(ce,{size:"small",modelValue:e(d).sixteenDigitColor,"onUpdate:modelValue":s[9]||(s[9]=n=>e(d).sixteenDigitColor=n)},null,8,["modelValue"])]),_:1},8,["modelValue","disabled","placeholder"])]),_:1},8,["label"])]),_:1}),l(V,{span:24},{default:a(()=>[l(R,{label:e(o)("remark"),prop:"remark"},{default:a(()=>[l(z,{modelValue:e(d).remark,"onUpdate:modelValue":s[11]||(s[11]=n=>e(d).remark=n),type:"textarea",clearable:"",disabled:e($),placeholder:`${e(o)("input")}${e(o)("remark")} `},null,8,["modelValue","disabled","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue","onClose"]),l(Je,{title:e(o)("import")+e(o)("colorLibrary.accessory_color"),modelValue:e(J),"onUpdate:modelValue":s[13]||(s[13]=n=>X(J)?J.value=n:null),columnData:e(f).matchColumnData,onConfirmCallback:ge},{sixteenDigitColorDefault:a(({data:{row:n}})=>[l(z,{modelValue:n.sixteenDigitColor,"onUpdate:modelValue":O=>n.sixteenDigitColor=O,placeholder:e(o)("choose")+e(o)("colorLibrary.16Color"),disabled:""},{append:a(()=>[l(ce,{size:"small",modelValue:n.sixteenDigitColor,"onUpdate:modelValue":O=>n.sixteenDigitColor=O},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])]),_:1},8,["title","modelValue","columnData"]),l(Ue,{width:"400px",modelValue:e(A).open,"onUpdate:modelValue":s[14]||(s[14]=n=>e(A).open=n),"upload-api":e(ze),onConfirmCallback:H,isDownloadRes:"",title:e(A).title,confirmText:e(o)("confirm"),cancelText:e(o)("cancel")},null,8,["modelValue","upload-api","title","confirmText","cancelText"])])}}});export{al as default};
